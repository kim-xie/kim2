<!doctype html>
<html>
  <head>
    <title>css格式化工具</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta name="content-type" content="text/html; charset=UTF-8">
  </head>
  <style type="text/css">
	  *{padding:0;margin:0;}
	  a{text-decoration:none;}
	  ul,ol li{list-style:none;}
	  body{font-size:12px;font-family:"微软雅黑";background:#EDEDEF;}
	  html,body,form,fieldset,textarea{height:100%; margin:0; padding:0; border:0; font-size:10pt; background:#eee;}
	  form { margin:0 13%; overflow:hidden;}
	  legend { line-height:3em; font-weight:bolder; font-size:20px;text-align:center;color: #006AAD;}
	  button { float:left; margin:1% 1% 0 0; cursor:pointer; text-align:center;font-size:16px;}
	  textarea { width:100%; height:25em;padding:6px; border:1px solid #ccc; display:block; background:#fff;}
  </style>
  <body>
  	  <form action="" onsubmit="return false">
		  <fieldset>
			 <legend>css格式化工具</legend>
			 <textarea name="" rows="" cols="" id="codeText"></textarea>
			 <button type="button" onclick="$(&#39;codeText&#39;).value=code.A();">压缩代码</button>
			 <button type="button" onclick="$(&#39;codeText&#39;).value=code.B();">格式(多行)</button>
			 <button type="button" onclick="$(&#39;codeText&#39;).value=code.C();">格式(单行)</button>
			 <button type="button" onclick="$(&#39;codeText&#39;).value=code.Z();">还原代码</button>
		  </fieldset>
	  </form>
	  <script type="text/javascript">
	  		function $(id){return document.getElementById(id);}
			function codeZip(obj){
				this.S=function(){
					var code=obj.value;
					if(!this.codeZ||this.codeZ=="")this.codeZ=code;
					code=code.replace(/(\n|\t|\s)*/ig,'$1');
					code=code.replace(/\n|\t|\s(\{|\}|\,|\:|\;)/ig,'$1');
					code=code.replace(/(\{|\}|\,|\:|\;)\s/ig,'$1');
					return code;
				}
				this.A=function(){
					var code=this.S();
					return code;
				} 
				this.B=function(){
					var code=this.S();
					code=code.replace(/(\{)/ig,' $1');
					code=code.replace(/(\{|\;)/ig,'$1\n\t');
					code=code.replace(/\t*(\})/ig,'$1\n');
					code=code.replace(/(\*\/)/ig,'$1\n');
					return code;
				}
				this.C=function(){
					var code=this.S();
					code=code.replace(/(\})/ig,'$1\n');
					code=code.replace(/(\*\/)/ig,'$1\n');
					return code;
				} 
				this.Z=function(){
					return (this.codeZ)?this.codeZ:obj.value;
				}
				var my=this;
				obj.onkeydown=function(){
					my.codeZ="";	
				}
			}
			var code=new codeZip($('codeText'));
	</script>
  </body>
</html>
